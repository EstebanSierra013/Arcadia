<!DOCTYPE html>
<html lang="fr">
  <head>
    <%- include('../partials/head'); %>
  </head>
  <body>
    <header>
      <%- include('../partials/header'); %>
    </header>
    <main>
      <div class="d-flex flex-column justify-content-center banner-secondary">
        <div class="banner-overlay"></div>
        <div class="text-center banner-title">
          <h1 id="name_page">Gestion <%= details.name %></h1>
        </div>
      </div>  
      <div class="flux p-xl-5">
        <div class="d-flex flex-column p-5 gap-4 gestion-container">
          <div>        
            <% if(functions[details.en_name] == "all") {%>   
              <div class="text-center">
                <button type="button" class="btn btn-arcadia-s" data-bs-toggle="modal" data-bs-target="#<%= details.en_name %>-b" >Ajouter</button>
              </div>           
            <% }; %> 
            <%- include('modal-create', { details, functions }); %> 
          </div>
          <% if(objets.length || objets != undefined) {%>
            <% if(details.en_name == "reports") {%>
              <% if(details.rol == "admin") {%>
                <%- include('../partials/table-gestion', { objets, details }); %>
              <% } else {%> 
                <%- include('../partials/table-gestion', { objets: objets[details.rol  + "_reports"], details }); %>
              <% }; %>  
            <% } else { %> 
              <%- include('../partials/table-gestion', { objets, details }); %>
            <% }; %>      
          <% }; %>        
        </div>                
      </div>
    </main>      
    <footer>
      <%- include('../partials/footer'); %>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="/js/script.js" crossorigin="anonymous"> </script>
  </body>
</html>